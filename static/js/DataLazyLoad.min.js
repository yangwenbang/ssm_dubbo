/*
 * Data Lazy Load - jQuery plugin for lazy loading data
 * Copyright (c) 2007-2013 logbird
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 * Project home:
 *   https://github.com/logbird/DataLazyLoad
 * Version:  1.0.0
 */
(function(b,a,c){
	b.fn.DataLazyLoad=function(f){
		var i=b(this);
		var g={offset:200,load:function(){},page:2};
		if(f){
			b.extend(g,f)
		}
		var d=b(a).height();
		var e=false;
		var h=function(j){
				if(j>0){
					g.page=j;
					e=false
				}
		    };
			b(a).scroll(function(){
				var j=b(a).scrollTop();
				//var k=b(i).offset().top-b(i).height()-(j+d);
				// 当滚动到最底部以上200像素时， 加载新内容
				var k = $(document).height() - $(this).scrollTop() - $(this).height();
				if(k<g.offset&&!e){
					e=true;
					g.load(g.page,h)
				}
			})
			}
})(jQuery,window);
			

